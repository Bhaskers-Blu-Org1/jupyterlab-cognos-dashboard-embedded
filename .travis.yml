language: python
python: '3.6'
cache:
  yarn: true
  pip: true
  directories:
    - node_modules
install:
  - yarn install
  - yarn run build
  - pip install .
script:
  - echo "no tests implemented"
deploy:
  - provider: script
    skip_cleanup: true
    script: "cp .npmrc.template $HOME/.npmrc && npm publish"
    on:
      repo: cognitive-class-labs/jupyterlab-cognos-dashboard-embedded
      tags: true
  - provider: pypi
    skip_cleanup: true
    server: https://na.artifactory.swg-devops.com/artifactory/api/pypi/apset-pypi-local
    user: james.reeve@ibm.com
    password:
      secure: m9cWNcnYVKkKwORzDrpGZD5oQCKC0GhD7D3DXHb5Pf/TBczTAaacfVdpGuE2NFA6bfspCewiX89+g1BGn/yb4T9HDyuq+RlNlRQK6oDk6bYyNamn0TTZYb0xd7yg3y6pJhzk78V1ZBWeTb6ATgu0KGPhuH//wQbWPEvCFmqADKDQvtkdulxKhkUo9IAPXpK9yCJONrCSfAIxXjGtn0tWBBtwmEWw9+wmls8FABj+b8r1vIJtMA3h+VGX2DDJmTSn/r9FCx8lknHSSI7rVQu00nU6L9LkqPKfeEUbDmdTJXFIDFOcVsgmWzOpIWBikrnr8pSKymqsKHxXv6r7f6e9ioioaYiDVvWjsTwo/0NXNZSaynRbQDJJoE7hPXmIQOGmxYCDN54azz9LYHPtOUcd2BnPZKBM3miA4eXCyCyaim6BTsL78UZVjURgQ78eVGrDJnhOgmzbrlnJJVSQWsNIwyuF2OfCTJWkjl7gsXOjlsICcvNi6O6A/Lf7JJsUh+ixvflFXHFnwKiM3CAN8or3IR4Il1pfJxjVBmIxyeUyy8m7ht5TTSKZJSrMQYtl2zjVHR+td8xU1qctdl/iNEEXpAUejZTQlmPALpI44lSiEFzIrMcioREmd3iqBCDZG1tjWuKfVG3GRXH+LZuGtWo70xjr84rTdw6tE5fB+GqoK0Q=
    on:
      repo: cognitive-class-labs/jupyterlab-cognos-dashboard-embedded
      tags: true
notifications:
  email: false
  slack:
    on_pull_requests: false
    on_failure: "change"
    on_success: "change"
    secure: "Vjo4iOMxhdDRjnfBFKeI7qPRIFccZGxIznqsj29YgD4prEtl3hoJ6UIoa9QiSZgM70fTTfwxtAxuBCo9TWXUNVF5d5LbCX/fGtTwx8ChpsM0pAco+Vqk2IEYBZzU2x1hbWolLTIkaHSVbBWqCV5yRvkOWod6T14axZCAQbJa8khelpxC0xFDxsYdD5BDWl9NdFugetPJbWxr7qxjyTX+B/mEHCm+8BGvCHX+Cd+ysCxlWozhElcvRnxCebDbRYUHkvc9elDue8qFMgFEcRcb6Yo+GFGjA95kLhLmpTybk2Bs7fIQIn86PpeObAIlZHKlKNB8rcN/OHxnzZ87VY2BPosz6Uankw0IUiTOER5knwf++mkhyDo0afRS1GHFr5z0UoPs490+5+nVOpfcuYWgERmP9VWfkxrKCfH7zUKrelRFCiqU21dLszMcMiLqTYcWrBbY3fNKx6grDi/tbv1daasyFq0pyyZWdn5wYm/Mg3iBmBGHxSoSPwl8y57EC4ik3BUcELkN1cT2jqM6KOsAddo/NOWdUxB5PPgGrJ1gnQp6r/8lB7R29cU0UkyGLOvB3slq5odlFAJWFLmYB6yIQ04am3WDk3HomqXGkZj6xUScPlKu5csoH0PGEEqDBb8FlHj7PnYrWEWFg5I4ieF1zhOl2fCyoNl0t7ZWqI/YdAw=" # pragma: whitelist secret
